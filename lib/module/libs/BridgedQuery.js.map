{"version":3,"names":["BridgedQuery","isLoading","_isLoading","hasNext","_hasNext","constructor","queryKey","type","binder","next","result","nativeModule","queryNext","release","queryRelease","DirectCallLogListQuery","RoomListQuery"],"sources":["BridgedQuery.ts"],"sourcesContent":["import { NativeQueryKey, NativeQueryType, Query } from '../types/Query';\nimport NativeBinder from './NativeBinder';\n\nexport class BridgedQuery<T extends NativeQueryType> implements Query {\n  private _isLoading = false;\n  private _hasNext = false;\n  get isLoading() {\n    return this._isLoading;\n  }\n  get hasNext() {\n    return this._hasNext;\n  }\n\n  constructor(protected queryKey: NativeQueryKey, protected type: T, protected binder: NativeBinder) {}\n\n  async next() {\n    this._isLoading = true;\n    const { hasNext, result } = await this.binder.nativeModule.queryNext(this.queryKey, this.type);\n    this._hasNext = hasNext;\n    this._isLoading = false;\n    return result;\n  }\n\n  release() {\n    this.binder.nativeModule.queryRelease(this.queryKey);\n  }\n}\n\nexport class DirectCallLogListQuery extends BridgedQuery<NativeQueryType.DIRECT_CALL_LOG> {}\nexport class RoomListQuery extends BridgedQuery<NativeQueryType.ROOM_LIST> {}\n"],"mappings":";;AAGA,OAAO,MAAMA,YAAN,CAA+D;EAGvD,IAATC,SAAS,GAAG;IACd,OAAO,KAAKC,UAAZ;EACD;;EACU,IAAPC,OAAO,GAAG;IACZ,OAAO,KAAKC,QAAZ;EACD;;EAEDC,WAAW,CAAWC,QAAX,EAA+CC,IAA/C,EAAkEC,MAAlE,EAAwF;IAAA,KAA7EF,QAA6E,GAA7EA,QAA6E;IAAA,KAAzCC,IAAyC,GAAzCA,IAAyC;IAAA,KAAtBC,MAAsB,GAAtBA,MAAsB;;IAAA,oCAT9E,KAS8E;;IAAA,kCARhF,KAQgF;EAAE;;EAE3F,MAAJC,IAAI,GAAG;IACX,KAAKP,UAAL,GAAkB,IAAlB;IACA,MAAM;MAAEC,OAAF;MAAWO;IAAX,IAAsB,MAAM,KAAKF,MAAL,CAAYG,YAAZ,CAAyBC,SAAzB,CAAmC,KAAKN,QAAxC,EAAkD,KAAKC,IAAvD,CAAlC;IACA,KAAKH,QAAL,GAAgBD,OAAhB;IACA,KAAKD,UAAL,GAAkB,KAAlB;IACA,OAAOQ,MAAP;EACD;;EAEDG,OAAO,GAAG;IACR,KAAKL,MAAL,CAAYG,YAAZ,CAAyBG,YAAzB,CAAsC,KAAKR,QAA3C;EACD;;AAtBmE;AAyBtE,OAAO,MAAMS,sBAAN,SAAqCf,YAArC,CAAmF;AAC1F,OAAO,MAAMgB,aAAN,SAA4BhB,YAA5B,CAAoE"}