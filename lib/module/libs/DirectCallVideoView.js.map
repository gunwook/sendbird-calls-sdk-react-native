{"version":3,"names":["React","createRef","View","findNodeHandle","requireNativeComponent","LINKING_ERROR","MODULE_NAME","NativeViewModule","Error","DirectCallVideoView","PureComponent","handle","nodeHandle","ref","current","validProps","__DEV__","props","viewType","callId","zOrderMediaOverlay","android_zOrderMediaOverlay","style","width","height","videoViewId","render"],"sources":["DirectCallVideoView.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { createRef } from 'react';\nimport { View, ViewProps, findNodeHandle, requireNativeComponent } from 'react-native';\n\nimport { LINKING_ERROR } from '../utils/constants';\n\nconst MODULE_NAME = 'RNSBDirectCallVideoView';\nconst NativeViewModule = requireNativeComponent(MODULE_NAME);\nif (!NativeViewModule) throw new Error(LINKING_ERROR);\n\nexport interface DirectCallVideoViewProps extends ViewProps {\n  viewType: 'local' | 'remote';\n  callId?: string;\n  android_zOrderMediaOverlay?: boolean;\n}\nexport default class DirectCallVideoView extends React.PureComponent<DirectCallVideoViewProps> {\n  private ref = createRef<any>();\n\n  private get handle() {\n    const nodeHandle = findNodeHandle(this.ref.current as any);\n    if (nodeHandle == null || nodeHandle === -1) {\n      throw new Error('Cannot found VideoView');\n    }\n    return nodeHandle;\n  }\n  private get validProps() {\n    if (__DEV__) {\n      if (this.props.viewType !== 'local' && this.props.viewType !== 'remote') {\n        throw new Error('DirectCallVideoView: Invalid ViewType props');\n      }\n    }\n\n    return {\n      viewType: this.props.viewType,\n      callId: this.props.callId,\n      zOrderMediaOverlay: this.props.android_zOrderMediaOverlay ?? false,\n      style: { width: '100%', height: '100%' },\n    };\n  }\n\n  public get videoViewId() {\n    return this.handle;\n  }\n\n  render() {\n    return (\n      <View style={this.props.style}>\n        <NativeViewModule ref={this.ref as any} {...this.validProps} />\n      </View>\n    );\n  }\n}\n\n// const DirectCallVideoView = React.forwardRef(function DirectCallVideoView(props: Props, ref) {\n//   const _nativeRef = useRef<any>();\n//\n//   const validProps = useMemo(() => {\n//     if (props.viewType !== 'local' && props.viewType !== 'remote') {\n//       throw new Error('DirectCallVideoView: Invalid ViewType props');\n//     }\n//\n//     return { ...props, style: { width: '100%', height: '100%' } };\n//   }, [props.viewType]);\n//\n//   useImperativeHandle(\n//     ref,\n//     () => {\n//       const videoViewId = findNodeHandle(_nativeRef.current);\n//       if (!videoViewId) throw new Error('Cannot found VideoView');\n//\n//       return { videoViewId };\n//     },\n//     [],\n//   );\n//\n//   return (\n//     <View style={props.style}>\n//       <NativeViewModule ref={_nativeRef} {...validProps} />\n//     </View>\n//   );\n// });\n//\n// export default DirectCallVideoView;\n"],"mappings":";;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,EAA0BC,cAA1B,EAA0CC,sBAA1C,QAAwE,cAAxE;AAEA,SAASC,aAAT,QAA8B,oBAA9B;AAEA,MAAMC,WAAW,GAAG,yBAApB;AACA,MAAMC,gBAAgB,GAAGH,sBAAsB,CAACE,WAAD,CAA/C;AACA,IAAI,CAACC,gBAAL,EAAuB,MAAM,IAAIC,KAAJ,CAAUH,aAAV,CAAN;AAOvB,eAAe,MAAMI,mBAAN,SAAkCT,KAAK,CAACU,aAAxC,CAAgF;EAAA;IAAA;;IAAA,0CAC/ET,SAAS,EADsE;EAAA;;EAG3E,IAANU,MAAM,GAAG;IACnB,MAAMC,UAAU,GAAGT,cAAc,CAAC,KAAKU,GAAL,CAASC,OAAV,CAAjC;;IACA,IAAIF,UAAU,IAAI,IAAd,IAAsBA,UAAU,KAAK,CAAC,CAA1C,EAA6C;MAC3C,MAAM,IAAIJ,KAAJ,CAAU,wBAAV,CAAN;IACD;;IACD,OAAOI,UAAP;EACD;;EACqB,IAAVG,UAAU,GAAG;IACvB,IAAIC,OAAJ,EAAa;MACX,IAAI,KAAKC,KAAL,CAAWC,QAAX,KAAwB,OAAxB,IAAmC,KAAKD,KAAL,CAAWC,QAAX,KAAwB,QAA/D,EAAyE;QACvE,MAAM,IAAIV,KAAJ,CAAU,6CAAV,CAAN;MACD;IACF;;IAED,OAAO;MACLU,QAAQ,EAAE,KAAKD,KAAL,CAAWC,QADhB;MAELC,MAAM,EAAE,KAAKF,KAAL,CAAWE,MAFd;MAGLC,kBAAkB,EAAE,KAAKH,KAAL,CAAWI,0BAAX,IAAyC,KAHxD;MAILC,KAAK,EAAE;QAAEC,KAAK,EAAE,MAAT;QAAiBC,MAAM,EAAE;MAAzB;IAJF,CAAP;EAMD;;EAEqB,IAAXC,WAAW,GAAG;IACvB,OAAO,KAAKd,MAAZ;EACD;;EAEDe,MAAM,GAAG;IACP,oBACE,oBAAC,IAAD;MAAM,KAAK,EAAE,KAAKT,KAAL,CAAWK;IAAxB,gBACE,oBAAC,gBAAD;MAAkB,GAAG,EAAE,KAAKT;IAA5B,GAA4C,KAAKE,UAAjD,EADF,CADF;EAKD;;AAnC4F,C,CAsC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}